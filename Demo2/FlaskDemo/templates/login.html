<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
</head>
<body>
    <label>用户名：</label><input type="text" id="username"><br>
    <label>密码：</label><input type="password" id="password"><br>
    <input type="button" value="登录" onclick="login()">
    <script>
        function login() {
            var formdata = {
                "username": $("#username").val(),
                "password": $("#password").val(),
            }
            $.ajax({
                url: "/logon",
                type: "POST",
                data: JSON.stringify(formdata),
                datatype: "json",
                contentType: "application/json",
                success: function (result) {
                    if (result.result == "OK") {
                        toastr["success"]("登录成功")
                        setTimeout(next_url(result.next_url),3000);
                    } else if (result.result == "NO") {
                        toastr["error"](result.msg)
                    }
                },
                error: function () {
                    toastr["error"]("网络连接失败")
                }
            })
        }
        function next_url() {
            window.location.href = url;

        }


    </script>
</body>
</html>